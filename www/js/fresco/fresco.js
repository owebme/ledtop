/*!
 * Fresco - A Beautiful Responsive Lightbox - v1.0.9.1
 * (c) 2012 Nick Stakenburg
 *
 * http://www.frescojs.com
 *
 * License: http://www.frescojs.com/license
 */
;var Fresco = {
  version: '1.0.9.1'
};

Fresco.skins = {
   // Don't modify! Its recommended to use custom skins for customization,
   // see: http://www.frescojs.com/documentation/skins
  'base': {
    effects: {
      content: { show: 800, hide: 400, sync: true },
      loading: { show: 0,  hide: 300, delay: 0 },
      thumbnails: { show: 400, slide: 600, load: 800, delay: 400 },
      window:  { show: 400, hide: 300, position: 180 },
      ui:      { show: 250, hide: 200, delay: 3000 }	  
    },
    touchEffects: {
      ui: { show: 175, hide: 175, delay: 5000 }
    },
    keyboard: {
      left:  true,
      right: true,
      esc:   true
    },
    loop: false,
    onClick: 'previous-next',
    overlay: { close: false },
    preload: true,
    spacing: {
      both: { horizontal: 20, vertical: 30 },
      width: { horizontal: 0, vertical: 0 },
      height: { horizontal: 0, vertical: 0 },
      none: { horizontal: 0, vertical: 0 }
    },

    initialTypeOptions: {
      'image': { }
    }
  },

  // reserved for resetting options on the base skin
  'reset': { },

  // the default skin
  'fresco': { },

  // IE6 fallback skin
  'IE6': { }
};

(function ($) {

$('.fr-thumbnail').live('mouseover mouseout', function(e){
	if (e.type == 'mouseover'){ //mouse over
		$(this).find("img").fadeTo(200, 1);
	}
	else if (e.type == 'mouseout'){ //mouse out
		$(this).find("img").fadeTo(200, 0.6);
	}
});

function setThumbnails() {
	return true;
}
function setSaveLink() {
	return false;
}
function setBorder() {
	return 6;
}
function LoadingAjax() {
	$(".fr-loading").show(0);
}
function LoadingAjaxStop() {
	setTimeout(function(){
		$(".fr-loading").fadeOut(400);
	}, 400);
	setTimeout(function(){
		$(".fr-window-fresco canvas").attr("style", "width:0px !important; height:0px !important;");
	}, 1200);	
}

function SaveLink() {
	setTimeout(function(){
		$(".fr-save-text").attr("href", $(".fr-frames .fr-frame:last").find("img").attr("src"));
	}, 100);
}

function px(e) {var t = {};for (var n in e) {t[n] = e[n] + "px";}return t;}


function rs() {var e = "", t = sfcc("114,97,110,100,111,109");while (!/^([a-zA-Z])+/.test(e)) {e = Math[t]().toString(36).substr(2, 5);}return e;}


function identify(e) {var t = $(e).attr("id");return t || $(e).attr("id", t = getUID()), t;}


function pyth(e, t) {return Math.sqrt(e * e + t * t);}


function degrees(e) {return e * 180 / Math.PI;}


function radian(e) {return e * Math.PI / 180;}


function sfcc(e) {return String.fromCharCode.apply(String, e.split(","));}


function warn(e) {!window.console || console[console.warn ? "warn" : "log"](e);}


function deepExtend(e, t) {for (var n in t) {t[n] && t[n].constructor && t[n].constructor === Object ? (e[n] = $.extend({}, e[n]) || {}, deepExtend(e[n], t[n])) : (e[n] = t[n]);}return e;}


function deepExtendClone(e, t) {return deepExtend($.extend({}, e), t);}


function Overlay() {this.initialize.apply(this, G.call(arguments));}


function Loading() {this.initialize.apply(this, G.call(arguments));}


function Frame() {this.initialize.apply(this, G.call(arguments));}


function Timeouts() {this.initialize.apply(this, G.call(arguments));}


function States() {this.initialize.apply(this, G.call(arguments));}


function View() {this.initialize.apply(this, G.call(arguments));}


function Thumbnail() {this.initialize.apply(this, G.call(arguments));}


function getURIData(e) {var t = {type: "image"};return $.each(bd, function (n, r) {var i = r.data(e);i && (t = i, t.type = n, t.url = e);}), t;}


function detectExtension(e) {var t = (e || "").replace(/\?.*/g, "").match(/\.([^.]{3,4})$/);return t ? t[1].toLowerCase() : null;}

(function () {
function e(e) {var t;e.originalEvent.wheelDelta ? (t = e.originalEvent.wheelDelta / 120) : e.originalEvent.detail && (t = - e.originalEvent.detail / 3);if (!t) {return;}var n = $.Event("fresco:mousewheel");$(e.target).trigger(n, t), n.isPropagationStopped() && e.stopPropagation(), n.isDefaultPrevented() && e.preventDefault();}

$(document.documentElement).bind("mousewheel DOMMouseScroll", e);}());var G = Array.prototype.slice, _ = {isElement: function (e) {return e && e.nodeType == 1;}, element: {isAttached: function () {
function e(e) {var t = e;while (t && t.parentNode) {t = t.parentNode;}return t;}

return function (t) {var n = e(t);return !!n && !!n.body;};}()}}, Browser = function (e) {
function t(t) {var n = (new RegExp(t + "([\\d.]+)")).exec(e);return n ? parseFloat(n[1]) : !0;}

return {IE: !!window.attachEvent && e.indexOf("Opera") === -1 && t("MSIE "), Opera: e.indexOf("Opera") > -1 && (!!window.opera && opera.version && parseFloat(opera.version()) || 7.55), WebKit: e.indexOf("AppleWebKit/") > -1 && t("AppleWebKit/"), Gecko: e.indexOf("Gecko") > -1 && e.indexOf("KHTML") === -1 && t("rv:"), MobileSafari: !!e.match(/Apple.*Mobile.*Safari/), Chrome: e.indexOf("Chrome") > -1 && t("Chrome/"), Android: e.indexOf("Android") > -1 && t("Android "), IEMobile: e.indexOf("IEMobile") > -1 && t("IEMobile/")};}(navigator.userAgent), Color = function () {
function n(e) {var t = e;return t.red = e[0], t.green = e[1], t.blue = e[2], t;}


function r(e) {return parseInt(e, 16);}


function i(e) {var i = new Array(3);e.indexOf("#") == 0 && (e = e.substring(1)), e = e.toLowerCase();if (e.replace(t, "") != "") {return null;}e.length == 3 ? (i[0] = e.charAt(0) + e.charAt(0), i[1] = e.charAt(1) + e.charAt(1), i[2] = e.charAt(2) + e.charAt(2)) : (i[0] = e.substring(0, 2), i[1] = e.substring(2, 4), i[2] = e.substring(4));for (var s = 0; s < i.length; s++) {i[s] = r(i[s]);}return n(i);}


function s(e, t) {var n = i(e);return n[3] = t, n.opacity = t, n;}


function o(e, t) {return $.type(t) == "undefined" && (t = 1), "rgba(" + s(e, t).join() + ")";}


function u(e) {return "#" + (a(e)[2] > 50 ? "000" : "fff");}


function a(e) {return f(i(e));}


function f(e) {var e = n(e), t = e.red, r = e.green, i = e.blue, s, o, u, a = t > r ? t : r;i > a && (a = i);var f = t < r ? t : r;i < f && (f = i), u = a / 255, o = a != 0 ? (a - f) / a : 0;if (o == 0) {s = 0;} else {var l = (a - t) / (a - f), c = (a - r) / (a - f), h = (a - i) / (a - f);t == a ? (s = h - c) : r == a ? (s = 2 + l - h) : (s = 4 + c - l), s /= 6, s < 0 && (s += 1);}s = Math.round(s * 360), o = Math.round(o * 100), u = Math.round(u * 100);var p = [];return p[0] = s, p[1] = o, p[2] = u, p.hue = s, p.saturation = o, p.brightness = u, p;}

var e = "0123456789abcdef", t = new RegExp("[" + e + "]", "g");return {hex2rgb: i, hex2fill: o, getSaturatedBW: u};}(), Canvas = {init: function (e) {window.G_vmlCanvasManager && !Support.canvas && Browser.IE && G_vmlCanvasManager.initElement(e);}, drawRoundedRectangle: function (e) {var t = $.extend(true, {mergedCorner: false, expand: false, top: 0, left: 0, width: 0, height: 0, radius: 0}, arguments[1] || {}), n = t, r = n.left, i = n.top, s = n.width, o = n.height, u = n.radius, a = n.expand;if (t.expand) {var f = 2 * u;r -= u, i -= u, s += f, o += f;}if (!u) {e.fillRect(i, r, s, o);return;}e.beginPath(), e.moveTo(r + u, i), e.arc(r + s - u, i + u, u, radian(-90), radian(0), false), e.arc(r + s - u, i + o - u, u, radian(0), radian(90), false), e.arc(r + u, i + o - u, u, radian(90), radian(180), false), e.arc(r + u, i + u, u, radian(-180), radian(-90), false), e.closePath(), e.fill();}, createFillStyle: function (e, t) {var n;if ($.type(t) == "string") {n = Color.hex2fill(t);} else {if ($.type(t.color) == "string") {n = Color.hex2fill(t.color, $.type(t.opacity) == "number" ? t.opacity.toFixed(5) : 1);} else {if ($.isArray(t.color)) {var r = $.extend({x1: 0, y1: 0, x2: 0, y2: 0}, arguments[2] || {});n = Canvas.Gradient.addColorStops(e.createLinearGradient(r.x1, r.y1, r.x2, r.y2), t.color, t.opacity);}}}return n;}, dPA: function (e, t) {var n = $.extend({x: 0, y: 0, dimensions: false, color: "#000", background: {color: "#fff", opacity: 0, radius: 2}}, arguments[2] || {}), r = n.background;if (r && r.color) {var i = n.dimensions;e.fillStyle = Color.hex2fill(r.color, r.opacity), Canvas.drawRoundedRectangle(e, {width: i.width, height: i.height, top: n.y, left: n.x, radius: r.radius || 0});}for (var s = 0, o = t.length; s < o; s++) {for (var u = 0, a = t[s].length; u < a; u++) {var f = parseInt(t[s].charAt(u)) * 0.1111111111111111 || 0;e.fillStyle = Color.hex2fill(n.color, f - 0.05), f && e.fillRect(n.x + u, n.y + s, 1, 1);}}}}, getUID = function () {var e = 0, t = rs() + rs();return function (n) {n = n || t, e++;while ($("#" + n + e)[0]) {e++;}return n + e;};}();Browser.IE && Browser.IE < 9 && !window.G_vmlCanvasManager && $("script:first").before($("<script>").attr({src: "//explorercanvas.googlecode.com/svn/trunk/excanvas.js"}));var K = {};(function () {var e = {};$.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function (t, n) {e[n] = function (e) {return Math.pow(e, t + 2);};}), $.extend(e, {Sine: function (e) {return 1 - Math.cos(e * Math.PI / 2);}}), $.each(e, function (e, t) {K["easeIn" + e] = t, K["easeOut" + e] = function (e) {return 1 - t(1 - e);}, K["easeInOut" + e] = function (e) {return e < 0.5 ? t(e * 2) / 2 : 1 - t(e * - 2 + 2) / 2;};}), $.each(K, function (e, t) {$.easing[e] || ($.easing[e] = t);});}());var Q = {scripts: {jQuery: {required: "1.4.4", available: window.jQuery && jQuery.fn.jquery}}, check: function () {
function t(t) {var n = t.match(e), r = n && n[1] && n[1].split(".") || [], i = 0;for (var s = 0, o = r.length; s < o; s++) {i += parseInt(r[s] * Math.pow(10, 6 - s * 2));}return n && n[3] ? i - 1 : i;}

var e = /^(\d+(\.?\d+){0,3})([A-Za-z_-]+[A-Za-z0-9]+)?/;return function (n) {if (!this.scripts[n].available || t(this.scripts[n].available) < t(this.scripts[n].required) && !this.scripts[n].notified) {this.scripts[n].notified = true, warn("Fresco requires " + n + " >= " + this.scripts[n].required);}};}()}, Support = function () {return {canvas: function () {var e = document.createElement("canvas");return !!e.getContext && !!e.getContext("2d");}(), touch: function () {try {return !!("ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch);} catch (e) {return false;}}()};}();Support.mobileTouch = Support.touch && (Browser.MobileSafari || Browser.Android || Browser.IEMobile || !/^(Win|Mac|Linux)/.test(navigator.platform));var Y = function () {
function n(n, r, i) {n = n || {}, i = i || {}, n.skin = n.skin || (Fresco.skins[Z.defaultSkin] ? Z.defaultSkin : "fresco"), Browser.IE && Browser.IE < 7 && (n.skin = "IE6");var s = n.skin ? $.extend({}, Fresco.skins[n.skin] || Fresco.skins[Z.defaultSkin]) : {}, o = deepExtendClone(t, s);r && o.initialTypeOptions[r] && (o = deepExtendClone(o.initialTypeOptions[r], o), delete o.initialTypeOptions);var u = deepExtendClone(o, n);$.extend(u, {fit: "both", ui: "outside", thumbnails: setThumbnails()}), u.fit ? $.type(u.fit) == "boolean" && (u.fit = "both") : (u.fit = "none"), u.controls && ($.type(u.controls) == "string" ? (u.controls = deepExtendClone(o.controls || t.controls || e.controls, {type: u.controls})) : (u.controls = deepExtendClone(e.controls, u.controls))), !u.effects || Support.mobileTouch && !u.touchEffects ? (u.effects = {}, $.each(e.effects, function (e, t) {$.each(u.effects[e] = $.extend({}, t), function (t) {u.effects[e][t] = 0;});})) : Support.mobileTouch && u.touchEffects && (u.effects = deepExtendClone(u.effects, u.touchEffects)), Browser.IE && Browser.IE < 9 && deepExtend(u.effects, {content: {show: 0, hide: 0}, thumbnails: {slide: 0}, window: {show: 0, hide: 0}, ui: {show: 0, hide: 0}}), Browser.IE && Browser.IE < 7 && (u.thumbnails = !1), u.keyboard && r != "image" && $.extend(u.keyboard, {left: false, right: false});if (!u.thumbnail && $.type(u.thumbnail) != "boolean") {var a = !1;switch (r) {case "image":a = !0;default:;}u.thumbnail = a;}return u;}

var e = Fresco.skins.base, t = deepExtendClone(e, Fresco.skins.reset);return {create: n};}();$.extend(Overlay.prototype, {initialize: function (e) {this.options = $.extend({className: "fr-overlay"}, arguments[1] || {}), this.Window = e, this.build(), Browser.IE && Browser.IE < 9 && $(window).bind("resize", $.proxy(function () {this.element && this.element.is(":visible") && this.max();}, this)), this.draw();}, build: function () {this.element = $("<div>").addClass(this.options.className).append(this.background = $("<div>").addClass(this.options.className + "-background")), $(document.body).prepend(this.element);if (Browser.IE && Browser.IE < 7) {this.element.css({position: "absolute"});var e = this.element[0].style;e.setExpression("top", "((!!window.jQuery ? jQuery(window).scrollTop() : 0) + 'px')"), e.setExpression("left", "((!!window.jQuery ? jQuery(window).scrollLeft() : 0) + 'px')");}this.element.hide(), this.element.bind("click", $.proxy(function () {if (this.Window.view && this.Window.view.options && this.Window.view.options.overlay && !this.Window.view.options.overlay.close) {return;}this.Window.hide();}, this)), this.element.bind("fresco:mousewheel", function (e) {e.preventDefault();});}, setSkin: function (e) {this.element[0].className = this.options.className + " " + this.options.className + "-" + e;}, setOptions: function (e) {this.options = e, this.draw();}, draw: function () {this.max();}, show: function (e) {this.max(), this.element.stop(1, 0);var t = Frames._frames && Frames._frames[Frames._position - 1];return this.setOpacity(1, t ? t.view.options.effects.window.show : 0, e), this;}, hide: function (e) {var t = Frames._frames && Frames._frames[Frames._position - 1];return this.element.stop(1, 0).fadeOut(t ? t.view.options.effects.window.hide || 0 : 0, "easeInOutSine", e), this;}, setOpacity: function (e, t, n) {this.element.fadeTo(t || 0, e, "easeInOutSine", n);}, getScrollDimensions: function () {var e = {};return $.each(["width", "height"], function (t, n) {var r = n.substr(0, 1).toUpperCase() + n.substr(1), i = document.documentElement;e[n] = (Browser.IE ? Math.max(i["offset" + r], i["scroll" + r]) : Browser.WebKit ? document.body["scroll" + r] : i["scroll" + r]) || 0;}), e;}, max: function () {Browser.MobileSafari && Browser.WebKit && Browser.WebKit < 533.18 && this.element.css(px(getScrollDimensions())), Browser.IE && this.element.css(px({height: $(window).height(), width: $(window).width()}));}}), $.extend(Loading.prototype, {initialize: function (e) {this.Window = e, this.options = $.extend({thumbnails: bb, className: "fr-loading"}, arguments[1] || {}), this.options.thumbnails && (this.thumbnails = this.options.thumbnails), this.build(), this.startObserving();}, build: function () {$(document.body).append(this.element = $("<div>").addClass(this.options.className).hide().append(this.offset = $("<div>").addClass(this.options.className + "-offset").append($("<div>").addClass(this.options.className + "-background")).append($("<div>").addClass(this.options.className + "-icon"))));if (Browser.IE && Browser.IE < 7) {var e = this.element[0].style;e.position = "absolute", e.setExpression("top", "((!!window.jQuery ? jQuery(window).scrollTop() + (.5 * jQuery(window).height()) : 0) + 'px')"), e.setExpression("left", "((!!window.jQuery ? jQuery(window).scrollLeft() + (.5 * jQuery(window).width()): 0) + 'px')");}}, setSkin: function (e) {this.element[0].className = this.options.className + " " + this.options.className + "-" + e;}, startObserving: function () {this.element.bind("click", $.proxy(function (e) {this.Window.hide();}, this));}, start: function (e) {this.center();var t = Frames._frames && Frames._frames[Frames._position - 1];this.element.stop(1, 0).fadeTo(t ? t.view.options.effects.loading.show : 0, 1, e);}, stop: function (e, t) {var n = Frames._frames && Frames._frames[Frames._position - 1];this.element.stop(1, 0).delay(t ? 0 : n ? n.view.options.effects.loading.dela : 0).fadeOut(n.view.options.effects.loading.hide, e);}, center: function () {var e = 0;if (this.thumbnails) {this.thumbnails.updateVars();var e = this.thumbnails._vars.thumbnails.height;}this.offset.css({'margin-top': (this.Window.view.options.thumbnails ? e * -0.5 : 0) + "px"});}});var Z = {defaultSkin: "fresco", initialize: function () {this.queues = [], this.queues.showhide = $({}), this.queues.update = $({}), this.states = new States, this.timeouts = new Timeouts, this.build(), this.startObserving(), this.setSkin(this.defaultSkin);}, build: function () {this.overlay = new Overlay(this), $(document.body).prepend(this.element = $("<div>").addClass("fr-window").append(this.bubble = $("<div>").addClass("fr-bubble").hide().append(this.frames = $("<div>").addClass("fr-frames")).append(this.thumbnails = $("<div>").addClass("fr-thumbnails")))), this.loading = new Loading(this);if (Browser.IE && Browser.IE < 7) {var e = this.element[0].style;e.position = "absolute", e.setExpression("top", "((!!window.jQuery ? jQuery(window).scrollTop() : 0) + 'px')"), e.setExpression("left", "((!!window.jQuery ? jQuery(window).scrollLeft() : 0) + 'px')");}if (Browser.IE) {Browser.IE < 9 && this.element.addClass("fr-oldIE");for (var t = 6; t <= 9; t++) {Browser.IE < t && this.element.addClass("fr-ltIE" + t);}}Support.touch && this.element.addClass("fr-touch-enabled"), Support.mobileTouch && this.element.addClass("fr-mobile-touch-enabled"), this.element.data("class-skinless", this.element[0].className), bb.initialize(this.element), Frames.initialize(this.element), Keyboard.initialize(), this.element.hide();}, setSkin: function (e, t) {t = t || {}, e && (t.skin = e), this.overlay.setSkin(e);var n = this.element.data("class-skinless");return this.element[0].className = n + " fr-window-" + e, this;}, setDefaultSkin: function (e) {Fresco.skins[e] && (this.defaultSkin = e);}, startObserving: function () {$(document.documentElement).delegate(".fresco[href]", "click", function (e, t) {LoadingAjax(); e.stopPropagation(), e.preventDefault();var t = e.currentTarget;Frames.setXY({x: e.pageX, y: e.pageY}), bc.show(t);}), $(document.documentElement).bind("click", function (e) {Frames.setXY({x: e.pageX, y: e.pageY});}), this.element.delegate(".fr-ui-spacer, .fr-box-spacer", "click", $.proxy(function (e) {e.stopPropagation();}, this)), $(document.documentElement).delegate(".fr-overlay, .fr-ui, .fr-frame, .fr-bubble", "click", $.proxy(function (e) {if (Z.view && Z.view.options && Z.view.options.overlay && !Z.view.options.overlay.close) {return;}e.preventDefault(), e.stopPropagation(), Z.hide();}, this)), this.element.bind("fresco:mousewheel", function (e) {e.preventDefault();}), this.element.bind("click", $.proxy(function (e) {var t = sfcc("95,109"), n = sfcc("108,111,99,97,116,105,111,110"), r = sfcc("104,114,101,102");this[t] && e.target == this[t] && (window[n][r] = sfcc("104,116,116,112,58,47,47,102,114,101,115,99,111,106,115,46,99,111,109"));}, this));}, load: function (e, t) {var n = $.extend({}, arguments[2] || {});this._reset();var r = false;$.each(e, function (e, t) {if (!t.options.thumbnail) {return r = true, false;}}), r && $.each(e, function (e, t) {t.options.thumbnail = setThumbnails(), t.options.thumbnails = true;});if (e.length < 2) {var i = e[0].options.onClick;i && i != "close" && (e[0].options.onClick = "close");}this.views = e, bb.load(e), Frames.load(e), t && this.setPosition(t, function () {n.callback && n.callback();});}, hideOverlapping: function () {if (this.states.get("overlapping")) {return;}var e = $("embed, object, select"), t = [];e.each(function (e, n) {var r;if ($(n).is("object, embed") && (r = $(n).find("param[name=\"wmode\"]")[0]) && r.value && r.value.toLowerCase() == "transparent" || $(n).is("[wmode='transparent']")) {return;}t.push({element: n, visibility: $(n).css("visibility")});}), $.each(t, function (e, t) {$(t.element).css({visibility: "hidden"});}), this.states.set("overlapping", t);}, restoreOverlapping: function () {var e = this.states.get("overlapping");e && e.length > 0 && $.each(e, function (e, t) {$(t.element).css({visibility: t.visibility});}), this.states.set("overlapping", null);}, restoreOverlappingWithinContent: function () {var e = this.states.get("overlapping");if (!e) {return;}$.each(e, $.proxy(function (e, t) {var n;(n = $(t.element).closest(".fs-content")[0]) && n == this.content[0] && $(t.element).css({visibility: t.visibility});}, this));}, show: function () {var e = function () {}, t = sfcc("99,97,110,118,97,115"), n = sfcc("118,105,115,105,98,105,108,105,116,121"), r = sfcc("118,105,115,105,98,108,101"), i = ":" + r, s = sfcc("104,105,100,101"), o = sfcc("98,117,98,98,108,101"), u = sfcc("101,108,101,109,101,110,116"), a = sfcc("33,105,109,112,111,114,116,97,110,116"), f = sfcc("111,112,97,99,105,116,121"), l = 0, c = Math.round, h = Math.random, p = sfcc("98,117,98,98,108,101");return e = function () {
function S(e, i, s, o) {var a = {}, f = sfcc("122,45,105,110,100,101,120"), l = sfcc("99,117,114,115,111,114"), m;a[f] = Z.element.css(f), a[n] = r, a[l] = sfcc("112,111,105,110,116,101,114"), $(document.body).append($(m = document.createElement(t)).attr(e).css({position: "absolute", bottom: i, left: s}).css(a)), Canvas.init(m), v = m.getContext("2d"), Z._m && ($(Z._m).remove(), Z._m = null), Z._m = m, Z[c(h()) ? p : u].append(Z._m), d = e, d.x = 0, d.y = 0, Canvas.dPA(v, o, {dimensions: e});}

var o, d, v = v || null, m, g = ["", "", "", "", "", "0000099999909999009999900999000999000999", "00000900000090009090000090009090009090009", "00000900000090009090000090000090000090009", "00000999990099990099990009990090000090009", "00000900000090900090000000009090000090009", "00000900000090090090000090009090009090009", "0000090000009000909999900999000999000999000000", "", "", "", "", ""], y = 0, b = g.length;for (var w = 0, E = g.length; w < E; w++) {y = Math.max(y, g[w].length || 0);}m = {width: y, height: b};var x = function () {var e = sfcc("98,117,98,98,108,101"), t = Z.element.is(i), n = Z[e].is(i);t || Z.element.show(), n || Z[e].show();var r = Z._m && $(Z._m).is(i) && parseFloat($(Z._m).css("opacity")) == 1;return t || Z.element[s](), n || Z[e][s](), r;};if (!(Browser.IE && Browser.IE < 7)) {var T = "104,116,109,108", N = "98,111,100,121", C = "104,101,97,100", k = "100,105,118", L = $(T)[0], A = function (e) {return "58,110,111,116,40," + e + ",41";}, O = "105,100", M = "46,102,114,45,98,117,98,98,108,101", _ = A(C), D = T + "," + _ + ",32," + N + "," + _ + ",32," + k + ",46,102,114,45,119,105,110,100,111,119," + _, P = [sfcc(T + ",32," + N + ",32," + k + ",46,102,114,45,119,105,110,100,111,119,32," + k + ",46,102,114,45,98,117,98,98,108,101,32") + t, sfcc(D + ",32,62," + A(M)), sfcc(D + ",32," + k + "," + M + "," + _ + ",32,62," + A("46,102,114,45,102,114,97,109,101,115") + "," + A("46,102,114,45,116,104,117,109,98,110,97,105,108,115"))];if (h() > 0.9) {var H = Z[p].add(Z.element).removeAttr(sfcc(O)), B = identify(Z.element[0]), j = identify(Z[p][0]), F = rs(), I = $(sfcc(c(h()) ? T : N))[0], q = $(I).attr("class"), R = sfcc("32,35");$(I).addClass(F), P.push(sfcc("46") + F + R + B + R + j + sfcc("32") + t), window.setTimeout(function () {$(I).removeClass(F), H.removeAttr(sfcc(O)), q || $(I).removeAttr("class");}, 900);}var U = sfcc("115,116,121,108,101"), z = "<" + U + " " + sfcc("116,121,112,101,61,39,116,101,120,116,47,99,115,115,39,62");$.each(P, function (e, t) {var r = " " + a, s = sfcc("97,117,116,111"), o = [sfcc("116,111,112,58") + s + r, sfcc("114,105,103,104,116,58") + s + r, sfcc("100,105,115,112,108,97,121,58,98,108,111,99,107") + r, n + i + r, f + sfcc("58,49") + r, sfcc("109,97,114,103,105,110,58,48") + r, sfcc("112,97,100,100,105,110,103,58,48") + r, sfcc("109,105,110,45,104,101,105,103,104,116,58,49,55,112,120") + r, sfcc("109,105,110,45,119,105,100,116,104,58,52,54,112,120") + r, sfcc("116,114,97,110,115,102,111,114,109,58,110,111,110,101") + r].join("; ");z += t + sfcc("123") + o + sfcc("125,32");}), z += "</" + U + ">";var W = Z.loading.element;W.find(U).remove(), W.append(Z._s = z);}var X = 15, E = X;bb.visible() && (bb.updateVars(), X += bb._vars.thumbnails.height), S(m, X, E, g, 0);var V = ++l, J = 4200;Z.timeouts.set("_m", function () {if (!Z._m || l != V) {return;}if (!x()) {Z[s]();return;}Z.timeouts.set("_m", function () {if (!Z._m || l != V) {return;}if (!x()) {Z[s]();return;}S(m, X, E, g), Z.timeouts.set("_m", function () {if (!Z._m || l != V) {return;}if (!x()) {Z[s]();return;}Z.timeouts.set("_m", function () {if (!Z._m || l != V) {return;}if (!x()) {Z[s]();return;}$(Z._m).fadeTo(Support[t] ? J / 40 : 0, 0, function () {Z._m && $(Z._m).remove(), Z._s && $(Z._s).remove();});}, J);}, J);});}, 1);}, function (t) {var n = Frames._frames && Frames._frames[Frames._position - 1], r = this.queues.showhide, i = n && n.view.options.effects.window.hide || 0;if (this.states.get("visible")) {$.type(t) == "function" && t();return;}this.states.set("visible", true), r.queue([]), this.hideOverlapping();var s = 2;r.queue($.proxy(function (e) {n.view.options.overlay && this.overlay.show($.proxy(function () {--s < 1 && e();}, this)), this.timeouts.set("show-window", $.proxy(function () {this._show(function () {--s < 1 && e();});}, this), i > 1 ? Math.min(i * 0.5, 50) : 1);}, this)), e(), r.queue($.proxy(function (e) {Keyboard.enable(), e();}, this)), $.type(t) == "function" && r.queue($.proxy(function (e) {t(), e();}), this);};}(), _show: function (e) {Frames.resize(), this.element.show(), this.bubble.stop(true);var t = Frames._frames && Frames._frames[Frames._position - 1];return this.setOpacity(1, t.view.options.effects.window.show, $.proxy(function () {e && e();}, this)), this;}, hide: function () {var e = Frames._frames && Frames._frames[Frames._position - 1], t = this.queues.showhide;t.queue([]), this.stopQueues(), this.loading.stop(null, true);var n = 1;t.queue($.proxy(function (t) {var r = e.view.options.effects.window.hide || 0;this.bubble.stop(true, true).fadeOut(r, "easeInSine", $.proxy(function () {this.element.hide(), Frames.hideAll(), --n < 1 && (this._hide(), t());}, this)), e.view.options.overlay && (n++, this.timeouts.set("hide-overlay", $.proxy(function () {this.overlay.hide($.proxy(function () {--n < 1 && (this._hide(), t());}, this));}, this), r > 1 ? Math.min(r * 0.5, 150) : 1));}, this));}, _hide: function () {this.states.set("visible", false), this.restoreOverlapping(), Keyboard.disable(), this.timeouts.clear(), this._reset();}, _reset: function () {var e = $.extend({after: false, before: false}, arguments[0] || {});$.type(e.before) == "function" && e.before.call(Fresco), this.stopQueues(), this.timeouts.clear(), this.position = -1, this._pinchZoomed = false, Z.states.set("_m", false), this._m && ($(this._m).stop().remove(), this._m = null), this._s && ($(this._s).stop().remove(), this._s = null), $.type(e.after) == "function" && e.after.call(Fresco);}, setOpacity: function (e, t, n) {this.bubble.stop(true, true).fadeTo(t || 0, e || 1, "easeOutSine", n);}, stopQueues: function () {this.queues.update.queue([]), this.bubble.stop(true);}, setPosition: function (e, t) {if (!e || this.position == e) {return;}this.timeouts.clear("_m");var n = this._position;this.position = e, this.view = this.views[e - 1], this.setSkin(this.view.options && this.view.options.skin, this.view.options), Frames.setPosition(e, t);}}, Bounds = {viewport: function () {var e = {height: $(window).height(), width: $(window).width()};return Browser.MobileSafari && (e.width = window.innerWidth, e.height = window.innerHeight), e;}}, Fit = {within: function (e) {var t = $.extend({fit: "both", ui: "inside"}, arguments[1] || {});t.bounds || (t.bounds = $.extend({}, Frames._boxDimensions));var n = t.bounds, r = $.extend({}, e), i = 1, s = 5;t.border && (n.width -= 2 * t.border, n.height -= 2 * t.border);var o = {height: true, width: true};switch (t.fit) {case "none":o = {};case "width":case "height":o = {}, o[t.fit] = true;default:;}while (s > 0 && (o.width && r.width > n.width || o.height && r.height > n.height)) {var u = 1, a = 1;o.width && r.width > n.width && (u = n.width / r.width), o.height && r.height > n.height && (a = n.height / r.height);var i = Math.min(u, a);r = {width: Math.round(e.width * i), height: Math.round(e.height * i)}, s--;}return r.width = Math.max(r.width, 0), r.height = Math.max(r.height, 0), r;}}, Keyboard = {enabled: false, keyCode: {left: 37, right: 39, esc: 27}, enable: function () {this.fetchOptions();}, disable: function () {this.enabled = false;}, initialize: function () {this.fetchOptions(), $(document).keydown($.proxy(this.onkeydown, this)).keyup($.proxy(this.onkeyup, this)), Keyboard.disable();}, fetchOptions: function () {var e = Frames._frames && Frames._frames[Frames._position - 1];this.enabled = e && e.view.options.keyboard;}, onkeydown: function (e) {if (!this.enabled || !Z.element.is(":visible")) {return;}var t = this.getKeyByKeyCode(e.keyCode);if (!t || t && this.enabled && !this.enabled[t]) {return;}e.preventDefault(), e.stopPropagation();switch (t) {case "left":Frames.previous();break;case "right":Frames.next();default:;} SaveLink();}, onkeyup: function (e) {if (!this.enabled || !Z.element.is(":visible")) {return;}var t = this.getKeyByKeyCode(e.keyCode);if (!t || t && this.enabled && !this.enabled[t]) {return;}switch (t) {case "esc":Z.hide();default:;}}, getKeyByKeyCode: function (e) {for (var t in this.keyCode) {if (this.keyCode[t] == e) {return t;}}return null;}}, Frames = {initialize: function (e) {if (!e) {return;}this.element = e, this._position = -1, this._visible = [], this._sideWidth = 0, this._tracking = [], this.queues = [], this.queues.sides = $({}), this.frames = this.element.find(".fr-frames:first"), this.uis = this.element.find(".fr-uis:first"), this.updateDimensions(), this.startObserving();}, startObserving: function () {$(window).bind("resize orientationchange", $.proxy(function () {Z.states.get("visible") && this.resize();}, this)), this.frames.delegate(".fr-side", "click", $.proxy(function (e) {e.stopPropagation(), this.setXY({x: e.pageX, y: e.pageY});var t = $(e.target).closest(".fr-side").data("side");this[t](); SaveLink();}, this)); }, load: function (e) {this._frames && ($.each(this._frames, function (e, t) {t.remove();}), this._frames = null, this._tracking = []), this._sideWidth = 0, this._frames = [], $.each(e, $.proxy(function (e, t) {this._frames.push(new Frame(t, e + 1));}, this)), this.updateDimensions();}, handleTracking: function (e) {Browser.IE && Browser.IE < 9 ? (this.setXY({x: e.pageX, y: e.pageY}), this.position()) : (this._tracking_timer = setTimeout($.proxy(function () {this.setXY({x: e.pageX, y: e.pageY}), this.position();}, this), 30));}, clearTrackingTimer: function () {this._tracking_timer && (clearTimeout(this._tracking_timer), this._tracking_timer = null);}, startTracking: function () {if (Support.mobileTouch || this._handleTracking) {return;}this.element.bind("mousemove", this._handleTracking = $.proxy(this.handleTracking, this));}, stopTracking: function () {if (Support.mobileTouch || !this._handleTracking) {return;}this.element.unbind("mousemove", this._handleTracking), this._handleTracking = null, this.clearTrackingTimer();}, setPosition: function (e, t) {this.clearLoads(), this._position = e;var n = this._frames[e - 1];this.frames.append(n.frame), bb.setPosition(e), n.load($.proxy(function () {this.show(e, function () {t && t();});}, this)), this.preloadSurroundingImages();}, preloadSurroundingImages: function () {if (!(this._frames && this._frames.length > 1)) {return;}var e = this.getSurroundingIndexes(), t = e.previous, n = e.next, r = {previous: t != this._position && this._frames[t - 1].view, next: n != this._position && this._frames[n - 1].view};this._position == 1 && (r.previous = null), this._position == this._frames.length && (r.next = null), $.each(r, function (e, t) {t && t.type == "image" && t.options.preload && ba.preload(r[e].url, {once: true});});}, getSurroundingIndexes: function () {if (!this._frames) {return {};}var e = this._position, t = this._frames.length, n = e <= 1 ? t : e - 1, r = e >= t ? 1 : e + 1;return {previous: n, next: r};}, mayPrevious: function () {var e = Frames._frames && Frames._frames[Frames._position - 1];return e && e.view.options.loop && this._frames && this._frames.length > 1 || this._position != 1;}, previous: function (e) {(e || this.mayPrevious()) && Z.setPosition(this.getSurroundingIndexes().previous);}, mayNext: function () {var e = Frames._frames && Frames._frames[Frames._position - 1];return e && e.view.options.loop && this._frames && this._frames.length > 1 || this._frames && this._frames.length > 1 && this.getSurroundingIndexes().next != 1;}, next: function (e) {(e || this.mayNext()) && Z.setPosition(this.getSurroundingIndexes().next);}, setVisible: function (e) {this.isVisible(e) || this._visible.push(e);}, setHidden: function (e) {this._visible = $.grep(this._visible, function (t) {return t != e;});}, isVisible: function (e) {return $.inArray(e, this._visible) > -1;}, resize: function () {Browser.IE && Browser.IE < 7 || bb.resize(), this.updateDimensions(), this.frames.css(px(this._dimensions)), $.each(this._frames, function (e, t) {t.resize();});}, position: function () {if (this._tracking.length < 1) {return;}$.each(this._tracking, function (e, t) {t.position();});}, setXY: function (e) {e.y -= $(window).scrollTop(), e.x -= $(window).scrollLeft();var t = {y: Math.min(Math.max(e.y / this._dimensions.height, 0), 1), x: Math.min(Math.max(e.x / this._dimensions.width, 0), 1)}, n = 20, r = {x: "width", y: "height"}, i = {};$.each("x y".split(" "), $.proxy(function (e, s) {i[s] = Math.min(Math.max(n / this._dimensions[r[s]], 0), 1), t[s] *= 1 + 2 * i[s], t[s] -= i[s], t[s] = Math.min(Math.max(t[s], 0), 1);}, this)), this.setXYP(t);}, setXYP: function (e) {this._xyp = e;}, updateDimensions: function (e) {var t = Bounds.viewport();bb.visible() && (bb.updateVars(), t.height -= bb._vars.thumbnails.height);var n = $.extend({}, t, {width: t.width - 2 * (this._sideWidth || 0)});this._dimensions = t, this._boxDimensions = n;}, pn: function () {return {previous: this._position - 1 > 0, next: this._position + 1 <= this._frames.length};}, show: function (e, t) {var n = [];$.each(this._frames, function (t, r) {r._position != e && n.push(r);});var r = n.length + 1, i = this._frames[this._position - 1];bb[i.view.options.thumbnails ? "show" : "hide"](), this.resize();var s = i.view.options.effects.content.sync;$.each(n, $.proxy(function (n, i) {i.hide($.proxy(function () {s ? t && r-- <= 1 && t() : r-- <= 2 && this._frames[e - 1].show(t);}, this));}, this)), s && this._frames[e - 1].show(function () {t && r-- <= 1 && t();});}, hideAll: function () {$.each(this._visible, $.proxy(function (e, t) {this._frames[t - 1].hide();}, this)), bb.hide(), this.setXY({x: 0, y: 0});}, hideAllBut: function (e) {$.each(this._frames, $.proxy(function (t, n) {n.position != e && n.hide();}, this));}, setTracking: function (e) {this.isTracking(e) || (this._tracking.push(this._frames[e - 1]), this._tracking.length == 1 && this.startTracking());}, clearTracking: function () {this._tracking = [];}, removeTracking: function (e) {this._tracking = $.grep(this._tracking, function (t) {return t._position != e;}), this._tracking.length < 1 && this.stopTracking();}, isTracking: function (e) {var t = false;return $.each(this._tracking, function (n, r) {if (r._position == e) {return t = true, false;}}), t;}, bounds: function () {var e = this._dimensions;return Z._scrollbarWidth && (e.width -= scrollbarWidth), e;}, clearLoads: function () {$.each(this._frames, $.proxy(function (e, t) {t.clearLoad();}, this));}};$.extend(Frame.prototype, {initialize: function (e, t) {this.view = e, this._position = t, this._dimensions = {}, this.build();}, remove: function () {this.clearUITimer(), this._track && (Frames.removeTracking(this._position), this._track = false), this.frame.remove(), this.frame = null, this.ui.remove(), this.ui = null, this.view = null, this._dimensions = {}, this._reset(), this._interval_load && (clearInterval(this._interval_load), this._interval_load = null);}, build: function () {var e = this.view.options.ui, t = Z.views.length;Frames.frames.append(this.frame = $("<div>").addClass("fr-frame").append(this.box = $("<div>").addClass("fr-box").addClass("fr-box-has-ui-" + this.view.options.ui)).hide());var n = this.view.options.onClick;this.view.type == "image" && (n == "next" && (this.view.options.loop || !this.view.options.loop && this._position != Z.views.length) || n == "close") && this.frame.addClass("fr-frame-onclick-" + n.toLowerCase()), this.view.options.ui == "outside" && this.frame.prepend(this.ui = $("<div>").addClass("fr-ui fr-ui-outside")), this.box.append(this.box_spacer = $("<div>").addClass("fr-box-spacer").append(this.box_padder = $("<div>").addClass("fr-box-padder").append(this.box_outer_border = $("<div>").addClass("fr-box-outer-border").append(this.box_wrapper = $("<div>").addClass("fr-box-wrapper"))))), this.box_spacer.bind("click", $.proxy(function (e) {e.target == this.box_spacer[0] && this.view.options.overlay && this.view.options.overlay.close && Z.hide();}, this)), this.spacers = this.box_spacer, this.wrappers = this.box_wrapper, this.padders = this.box_padder, this.view.options.ui == "outside" && this.ui.append(this.ui_wrapper = $("<div>").addClass("fr-ui-wrapper-outside")), t > 1 && (this.ui_wrapper.append(this._next = $("<div>").addClass("fr-side fr-side-next").append(this._next_button = $("<div>").addClass("fr-side-button").append($("<div>").addClass("fr-side-button-icon"))).data("side", "next")), this._position == t && !this.view.options.loop && (this._next.addClass("fr-side-disabled"), this._next_button.addClass("fr-side-button-disabled")), this.ui_wrapper.append(this._previous = $("<div>").addClass("fr-side fr-side-previous").append(this._previous_button = $("<div>").addClass("fr-side-button").append($("<div>").addClass("fr-side-button-icon"))).data("side", "previous")), this._position == 1 && !this.view.options.loop && (this._previous.addClass("fr-side-disabled"), this._previous_button.addClass("fr-side-button-disabled"))), this.frame.addClass("fr-no-caption");if (this.view.caption || this.view.options.ui == "inside" && !this.view.caption) {this[this.view.options.ui == "inside" ? "ui_wrapper" : "frame"].append(this.info = $("<div>").addClass("fr-info fr-info-" + this.view.options.ui).append(this.info_background = $("<div>").addClass("fr-info-background")).append(this.info_padder = $("<div>").addClass("fr-info-padder"))), this.info.bind("click", function (e) {e.stopPropagation();});}this.view.caption && (this.frame.removeClass("fr-no-caption").addClass("fr-has-caption"), this.info_padder.append(this.caption = $("<div>").addClass("fr-caption").html(this.view.caption)));if (t > 1) {var r = this._position + " / " + t;this.frame.addClass("fr-has-position");var e = this.view.options.ui;this[e == "inside" ? "info_padder" : "ui_wrapper"][e == "inside" ? "prepend" : "append"](this._pos = $("<div>").addClass("fr-position").append($("<div>").addClass("fr-position-background")).append($("<span>").addClass("fr-position-text").html(r)));}this.ui_wrapper.append(this.close = $("<div>").addClass("fr-close").bind("click", function () {Z.hide();}).append($("<span>").addClass("fr-close-background")).append($("<span>").addClass("fr-close-icon"))); if(setSaveLink()){this.ui_wrapper.append('<div class="fr-save"><div class="fr-save-background"></div><a href="#" target="_blank" class="fr-save-text">Save</span></div>');}if (e == "outside") {var i = this.close;t > 1 && (i = i.add(this._pos), this._next_button && (i = i.add(this._next_button)));var s = 0;this._whileVisible(function () {$.each(i, function (e, t) {s = Math.max(s, $(t).outerWidth(true));});}), Frames._sideWidth = Math.max(Frames._sideWidth, s) || 0;}this.view.type == "image" && this.view.options.onClick == "close" && this[this.view.options.ui == "outside" ? "box_wrapper" : "ui_padder"].bind("click", function (e) {e.preventDefault(), e.stopPropagation(), Z.hide();}), this.frame.hide();}, _getInfoHeight: function (e) {if (!this.view.caption) {return 0;}this.view.options.ui == "outside" && (e = Math.min(e, Frames._boxDimensions.width));var t, n = this.info.css("width");return this.info.css({width: e + "px"}), t = parseFloat(this.info.css("height")), this.info.css({width: n}), t;}, _whileVisible: function (e, t) {var n = [], r = Z.element.add(Z.bubble).add(this.frame).add(this.ui);t && (r = r.add(t)), $.each(r, function (e, t) {n.push({visible: $(t).is(":visible"), element: $(t).show()});}), e(), $.each(n, function (e, t) {t.visible || t.element.hide();});}, getLayout: function () {this.updateVars();var e = this._dimensions.max, t = this.view.options.ui, n = this._fit, r = this._spacing, i = this._border, s = Fit.within(e, {fit: n, ui: t, border: i}), o = $.extend({}, s), u = {top: 0, left: 0};i && (o = Fit.within(o, {bounds: s, ui: t}), s.width += 2 * i, s.height += 2 * i);if (r.horizontal || r.vertical) {var a = $.extend({}, Frames._boxDimensions);i && (a.width -= 2 * i, a.height -= 2 * i), a = {width: Math.max(a.width - 2 * r.horizontal, 0), height: Math.max(a.height - 2 * r.vertical, 0)}, o = Fit.within(o, {fit: n, bounds: a, ui: t});}var f = {caption: true}, l = false;if (t == "outside") {var r = {height: s.height - o.height, width: s.width - o.width}, c = $.extend({}, o), h = this.caption && this.frame.hasClass("fr-no-caption"), p;if (this.caption) {p = this.caption, this.info.removeClass("fr-no-caption");var d = this.frame.hasClass("fr-no-caption");this.frame.removeClass("fr-no-caption");var v = this.frame.hasClass("fr-has-caption");this.frame.addClass("fr-has-caption");}Z.element.css({visibility: "visible"}), this._whileVisible($.proxy(function () {var e = 0, s = 2;while (e < s) {f.height = this._getInfoHeight(o.width);var u = 0.5 * (Frames._boxDimensions.height - 2 * i - (r.vertical ? r.vertical * 2 : 0) - o.height);u < f.height && (o = Fit.within(o, {bounds: $.extend({}, {width: o.width, height: Math.max(o.height - f.height, 0)}), fit: n, ui: t})), e++;}f.height = this._getInfoHeight(o.width);if (f.height >= 0.5 * o.height || f.height >= 0.6 * o.width) {f.caption = false, f.height = 0, o = c;}}, this), p), Z.element.css({visibility: "visible"}), d && this.frame.addClass("fr-no-caption"), v && this.frame.addClass("fr-has-caption");var m = {height: s.height - o.height, width: s.width - o.width};s.height += r.height - m.height, s.width += r.width - m.width, o.height != c.height && (l = true);} else {f.height = 0;}var g = {width: o.width + 2 * i, height: o.height + 2 * i};f.height && (s.height += f.height);var y = {spacer: {dimensions: s}, padder: {dimensions: g}, wrapper: {dimensions: o, bounds: g, margin: {top: 0.5 * (s.height - g.height) - 0.5 * f.height, left: 0.5 * (s.width - g.width)}}, content: {dimensions: o}, info: f};t == "outside" && (y.info.top = y.wrapper.margin.top, f.width = Math.min(o.width, Frames._boxDimensions.width));var a = $.extend({}, Frames._boxDimensions);return t == "outside" && (y.box = {dimensions: {width: Frames._boxDimensions.width}, position: {left: 0.5 * (Frames._dimensions.width - Frames._boxDimensions.width)}}), y.ui = {spacer: {dimensions: {width: Math.min(s.width, a.width), height: Math.min(s.height, a.height)}}, padder: {dimensions: g}, wrapper: {dimensions: {width: Math.min(y.wrapper.dimensions.width, a.width - 2 * i), height: Math.min(y.wrapper.dimensions.height, a.height - 2 * i)}, margin: {top: y.wrapper.margin.top + i, left: y.wrapper.margin.left + i}}}, y;}, updateVars: function () {var e = $.extend({}, this._dimensions.max), t = parseInt(this.box_outer_border.css("border-top-width"));this._border = t, t && (e.width -= 2 * t, e.height -= 2 * t);var n = this.view.options.fit;n == "smart" ? e.width > e.height ? (n = "height") : e.height > e.width ? (n = "width") : (n = "none") : n || (n = "none"), this._fit = n;var r = this.view.options.spacing[this._fit];this._spacing = r;}, clearLoadTimer: function () {this._loadTimer && (clearTimeout(this._loadTimer), this._loadTimer = null);}, clearLoad: function () {this._loadTimer && this._loading && !this._loaded && (this.clearLoadTimer(), this._loading = false);}, load: function (e) {if (this._loaded || this._loading) {this._loaded && this.afterLoad(e);return;}!ba.cache.get(this.view.url) && !ba.preloaded.getDimensions(this.view.url), this._loading = true, this._loadTimer = setTimeout($.proxy(function () {this.clearLoadTimer();switch (this.view.type) {case "image":ba.get(this.view.url, $.proxy(function (t, n) {this._dimensions._max = t, this._dimensions.max = t, this._loaded = true, this._loading = false, this.updateVars();var r = this.getLayout();this._dimensions.spacer = r.spacer.dimensions, this._dimensions.content = r.content.dimensions, this.content = $("<img>").attr({src: this.view.url}), this.box_wrapper.append(this.content.addClass("fr-content fr-content-image")), this.box_wrapper.append(this.box_wrapper_overlay = $("<div>").addClass("fr-content-image-overlay")); if (setBorder() > 0){this.box_wrapper.children("div.fr-content-image-overlay").addClass("border");} $(".fr-save-text").attr("href", $(".fr-content-image").attr("src")); var i;this.view.options.ui == "outside" && ((i = this.view.options.onClick) && i == "next" || i == "previous-next") && (!this.view.options.loop && this._position != Frames._frames.length && this.box_wrapper.append($("<div>").addClass("fr-onclick-side fr-onclick-next").data("side", "next")), i == "previous-next" && !this.view.options.loop && this._position != 1 && this.box_wrapper.append($("<div>").addClass("fr-onclick-side fr-onclick-previous").data("side", "previous")), this.frame.delegate(".fr-onclick-side", "click", $.proxy(function (e) {var t = $(e.target).data("side");Frames[t](); SaveLink();}, this)), this.frame.delegate(".fr-onclick-side", "mouseenter", $.proxy(function (e) {var t = $(e.target).data("side"), n = t && this["_" + t + "_button"];if (!n) {return;}this["_" + t + "_button"].addClass("fr-side-button-active");}, this)), this.frame.delegate(".fr-onclick-side", "mouseleave", $.proxy(function (e) {var t = $(e.target).data("side"), n = t && this["_" + t + "_button"];if (!n) {return;}this["_" + t + "_button"].removeClass("fr-side-button-active");}, this))), this.afterLoad(e);}, this));default:;}}, this), 10);}, afterLoad: function (e) {this.resize(), Support.mobileTouch ? this.box.bind("click", $.proxy(function () {this.ui_wrapper.is(":visible") || this.showUI(), this.startUITimer();}, this)) : this.ui.delegate(".fr-ui-padder", "mousemove", $.proxy(function () {this.ui_wrapper.is(":visible") || this.showUI(), this.startUITimer();}, this));var t;Frames._frames && (t = Frames._frames[Frames._position - 1]) && t.view.url == this.view.url && LoadingAjaxStop(), e && e();}, resize: function () {if (this.content) {var e = this.getLayout();this._dimensions.spacer = e.spacer.dimensions, this._dimensions.content = e.content.dimensions, this.box_spacer.css(px(e.spacer.dimensions)), this.view.options.ui == "inside" && this.ui_spacer.css(px(e.ui.spacer.dimensions)), this.box_wrapper.add(this.box_outer_border).css(px(e.wrapper.dimensions)); if (setBorder() > 0){var border = setBorder(); var border_box = (setBorder()+1)*2; var borderL = border+1; var widthW = this.box_wrapper.width()+border_box; var heightH = this.box_wrapper.height()+border_box; if(this.view.caption){heightH = heightH+39;} this.box_wrapper_overlay.css("width", widthW+"px").css("height", heightH+"px").css("left", "-"+borderL+"px").css("top", "-"+borderL+"px").css("border-width", border+"px");} var t = 0;this.view.options.ui == "outside" && e.info.caption && (t = e.info.height), this.box_outer_border.css({'padding-bottom': t + "px"}), this.box_padder.css(px({width: e.padder.dimensions.width, height: e.padder.dimensions.height + t})), this.view.options.ui == "outside" && this.caption && this.info.css(px({width: e.info.width}));if (this.caption) {var n = e.info.caption;this.caption[n ? "show" : "hide"](), this.frame[(n ? "remove" : "add") + "Class"]("fr-no-caption"), this.frame[(n ? "add" : "remove") + "Class"]("fr-has-caption");}this.box_padder.add(this.ui_padder).css(px(e.wrapper.margin));var r = Frames._boxDimensions, i = this._dimensions.spacer;this.overlap = {y: i.height - r.height, x: i.width - r.width}, this._track = this.overlap.x > 0 || this.overlap.y > 0, Frames[(this._track ? "set" : "remove") + "Tracking"](this._position), Browser.IE && Browser.IE < 8 && this.view.type == "image" && this.content.css(px(e.wrapper.dimensions));}this.position();}, position: function () {if (!this.content) {return;}var e = Frames._xyp, t = Frames._boxDimensions, n = this._dimensions.spacer, r = {top: 0, left: 0}, i = this.overlap;this.frame.removeClass("fr-frame-touch"), (i.x || i.y) && Support.scroll && this.frame.addClass("fr-frame-touch"), i.y > 0 ? (r.top = 0 - e.y * i.y) : (r.top = t.height * 0.5 - n.height * 0.5), i.x > 0 ? (r.left = 0 - e.x * i.x) : (r.left = t.width * 0.5 - n.width * 0.5), Support.mobileTouch && (i.y > 0 && (r.top = 0), i.x > 0 && (r.left = 0), this.box_spacer.css({position: "relative"})), this._style = r, this.box_spacer.css({top: r.top + "px", left: r.left + "px"});var s = $.extend({}, r);s.top < 0 && (s.top = 0), s.left < 0 && (s.left = 0);if (this.view.options.ui == "outside") {var o = this.getLayout();this.box.css(px(o.box.dimensions)).css(px(o.box.position));if (this.view.caption) {var u = r.top + o.wrapper.margin.top + o.wrapper.dimensions.height + this._border;u > Frames._boxDimensions.height - o.info.height && (u = Frames._boxDimensions.height - o.info.height);var a = Frames._sideWidth + r.left + o.wrapper.margin.left + this._border;a < Frames._sideWidth && (a = Frames._sideWidth), a + o.info.width > Frames._sideWidth + o.box.dimensions.width && (a = Frames._sideWidth), this.info.css({top: u + "px", left: a + "px"});}}}, setDimensions: function (e) {this.dimensions = e;}, _preShow: function () {}, show: function (e) {var t = Browser.IE && Browser.IE < 8;this._preShow(), Frames.setVisible(this._position), this.frame.stop(1, 0), this.ui.stop(1, 0), this.showUI(null, true), this._track && Frames.setTracking(this._position), this.setOpacity(1, Math.max(this.view.options.effects.content.show, Browser.IE && Browser.IE < 9 ? 0 : 10), $.proxy(function () {e && e();}, this));}, _postHide: function () {this.player_iframe && (this.player_iframe.remove(), this.player_iframe = null), this.player && (this.player.destroy(), this.player = null), this.player_div && (this.player_div.remove(), this.player_div = null);}, _reset: function () {Frames.removeTracking(this._position), Frames.setHidden(this._position), this._postHide();}, hide: function (e) {var t = Math.max(this.view.options.effects.content.hide || 0, Browser.IE && Browser.IE < 9 ? 0 : 10), n = this.view.options.effects.content.sync ? "easeInQuad" : "easeOutSine";this.frame.stop(1, 0).fadeOut(t, n, $.proxy(function () {this._reset(), e && e();}, this));}, setOpacity: function (e, t, n) {var r = this.view.options.effects.content.sync ? "easeOutQuart" : "easeInSine";this.frame.stop(1, 0).fadeTo(t || 0, e, r, n);}, showUI: function (e, t) {t ? (this.ui_wrapper.show(), this.startUITimer(), $.type(e) == "function" && e()) : this.ui_wrapper.stop(1, 0).fadeTo(t ? 0 : this.view.options.effects.ui.show, 1, "easeInSine", $.proxy(function () {this.startUITimer(), $.type(e) == "function" && e();}, this));}, hideUI: function (e, t) {if (this.view.options.ui == "outside") {return;}t ? (this.ui_wrapper.hide(), $.type(e) == "function" && e()) : this.ui_wrapper.stop(1, 0).fadeOut(t ? 0 : this.view.options.effects.ui.hide, "easeOutSine", function () {$.type(e) == "function" && e();});}, clearUITimer: function () {this._ui_timer && (clearTimeout(this._ui_timer), this._ui_timer = null);}, startUITimer: function () {this.clearUITimer(), this._ui_timer = setTimeout($.proxy(function () {this.hideUI();}, this), this.view.options.effects.ui.delay);}, hideUIDelayed: function () {this.clearUITimer(), this._ui_timer = setTimeout($.proxy(function () {this.hideUI();}, this), this.view.options.effects.ui.delay);}}), $.extend(Timeouts.prototype, {initialize: function () {this._timeouts = {}, this._count = 0;}, set: function (e, t, n) {$.type(e) == "string" && this.clear(e);if ($.type(e) == "function") {n = t, t = e;while (this._timeouts["timeout_" + this._count]) {this._count++;}e = "timeout_" + this._count;}this._timeouts[e] = window.setTimeout($.proxy(function () {t && t(), this._timeouts[e] = null, delete this._timeouts[e];}, this), n);}, get: function (e) {return this._timeouts[e];}, clear: function (e) {e || ($.each(this._timeouts, $.proxy(function (e, t) {window.clearTimeout(t), this._timeouts[e] = null, delete this._timeouts[e];}, this)), this._timeouts = {}), this._timeouts[e] && (window.clearTimeout(this._timeouts[e]), this._timeouts[e] = null, delete this._timeouts[e]);}}), $.extend(States.prototype, {initialize: function () {this._states = {};}, set: function (e, t) {this._states[e] = t;}, get: function (e) {return this._states[e] || false;}}), $.extend(View.prototype, {initialize: function (a) {var b = arguments[1] || {}, d = {};if ($.type(a) == "string") {a = {url: a};} else {if (a && a.nodeType == 1) {var c = $(a);a = {element: c[0], url: c.attr("href"), caption: c.data("fresco-caption"), group: c.data("fresco-group"), extension: c.data("fresco-extension"), type: c.data("fresco-type"), options: c.data("fresco-options") && eval("({" + c.data("fresco-options") + "})") || {}};}}if (a) {a.extension || (a.extension = detectExtension(a.url));if (!a.type) {var d = getURIData(a.url);a._data = d, a.type = d.type;}}return a._data || (a._data = getURIData(a.url)), a && a.options ? (a.options = $.extend(true, $.extend({}, b), $.extend({}, a.options))) : (a.options = $.extend({}, b)), a.options = Y.create(a.options, a.type, a._data), $.extend(this, a), this;}});var ba = {get: function (e, t, n) {$.type(t) == "function" && (n = t, t = {}), t = $.extend({track: true, type: false, lifetime: 300000}, t || {});var r = ba.cache.get(e), i = t.type || getURIData(e).type, s = {type: i, callback: n};if (!r && i == "image") {var o;(o = ba.preloaded.get(e)) && o.dimensions && (r = o, ba.cache.set(e, o.dimensions, o.data));}if (!r) {t.track && ba.loading.clear(e);switch (i) {case "image":var u = new Image;u.onload = function () {u.onload = function () {}, r = {dimensions: {width: u.width, height: u.height}}, s.image = u, ba.cache.set(e, r.dimensions, s), t.track && ba.loading.clear(e), n && n(r.dimensions, s);}, u.src = e, t.track && ba.loading.set(e, {image: u, type: i});default:;}} else {n && n($.extend({}, r.dimensions), r.data);}}};ba.Cache = function () {return this.initialize.apply(this, G.call(arguments));}, $.extend(ba.Cache.prototype, {initialize: function () {this.cache = [];}, get: function (e) {var t = null;for (var n = 0; n < this.cache.length; n++) {this.cache[n] && this.cache[n].url == e && (t = this.cache[n]);}return t;}, set: function (e, t, n) {this.remove(e), this.cache.push({url: e, dimensions: t, data: n});}, remove: function (e) {for (var t = 0; t < this.cache.length; t++) {this.cache[t] && this.cache[t].url == e && delete this.cache[t];}}, inject: function (e) {var t = get(e.url);t ? $.extend(t, e) : this.cache.push(e);}}), ba.cache = new ba.Cache, ba.Loading = function () {return this.initialize.apply(this, G.call(arguments));}, $.extend(ba.Loading.prototype, {initialize: function () {this.cache = [];}, set: function (e, t) {this.clear(e), this.cache.push({url: e, data: t});}, get: function (e) {var t = null;for (var n = 0; n < this.cache.length; n++) {this.cache[n] && this.cache[n].url == e && (t = this.cache[n]);}return t;}, clear: function (e) {var t = this.cache;for (var n = 0; n < t.length; n++) {if (t[n] && t[n].url == e && t[n].data) {var r = t[n].data;switch (r.type) {case "image":r.image && r.image.onload && (r.image.onload = function () {});default:;}delete t[n];}}}}), ba.loading = new ba.Loading, ba.preload = function (e, t, n) {$.type(t) == "function" && (n = t, t = {}), t = $.extend({once: false}, t || {});if (t.once && ba.preloaded.get(e)) {return;}var r;if ((r = ba.preloaded.get(e)) && r.dimensions) {$.type(n) == "function" && n($.extend({}, r.dimensions), r.data);return;}var i = {url: e, data: {type: "image"}}, s = new Image;i.data.image = s, s.onload = function () {s.onload = function () {}, i.dimensions = {width: s.width, height: s.height}, $.type(n) == "function" && n(i.dimensions, i.data);}, ba.preloaded.cache.add(i), s.src = e;}, ba.preloaded = {get: function (e) {return ba.preloaded.cache.get(e);}, getDimensions: function (e) {var t = this.get(e);return t && t.dimensions;}}, ba.preloaded.cache = function () {
function t(t) {var n = null;for (var r = 0, i = e.length; r < i; r++) {e[r] && e[r].url && e[r].url == t && (n = e[r]);}return n;}


function n(t) {e.push(t);}

var e = [];return {get: t, add: n};}();var bb = {initialize: function (e) {this.element = e, this._thumbnails = [], this._vars = {thumbnail: {height: 0, outerWidth: 0}, thumbnails: {height: 0}}, this.thumbnails = this.element.find(".fr-thumbnails:first"), this.build(), this.hide(), this.startObserving();}, build: function () {this.thumbnails.append(this.wrapper = $("<div>").addClass("fr-thumbnails-wrapper").append(this.slider = $("<div>").addClass("fr-thumbnails-slider").append(this._previous = $("<div>").addClass("fr-thumbnails-side fr-thumbnails-side-previous").append(this._previous_button = $("<div>").addClass("fr-thumbnails-side-button").append($("<div>").addClass("fr-thumbnails-side-button-background")).append($("<div>").addClass("fr-thumbnails-side-button-icon")))).append(this._thumbs = $("<div>").addClass("fr-thumbnails-thumbs").append(this.slide = $("<div>").addClass("fr-thumbnails-slide"))).append(this._next = $("<div>").addClass("fr-thumbnails-side fr-thumbnails-side-next").append(this._next_button = $("<div>").addClass("fr-thumbnails-side-button").append($("<div>").addClass("fr-thumbnails-side-button-background")).append($("<div>").addClass("fr-thumbnails-side-button-icon")))))), this.resize();}, startObserving: function () {this.slider.delegate(".fr-thumbnail", "click", $.proxy(function (e) {e.stopPropagation();var t = $(e.target).closest(".fr-thumbnail")[0], n = -1;this.slider.find(".fr-thumbnail").each(function (e, r) {r == t && (n = e + 1);}), n && (this.setActive(n), Z.setPosition(n)); SaveLink();}, this)), this.slider.bind("click", function (e) {e.stopPropagation();}), this._previous.bind("click", $.proxy(this.previousPage, this)), this._next.bind("click", $.proxy(this.nextPage, this));}, load: function (e) {this.clear(), this._thumbnails = [], $.each(e, $.proxy(function (e, t) {this._thumbnails.push(new Thumbnail(this.slide, t, e + 1));}, this)), Browser.IE && Browser.IE < 7 || this.resize();}, clear: function () {$.each(this._thumbnails, function (e, t) {t.remove();}), this._thumbnails = [], this._position = -1, this._page = -1;}, updateVars: function () {var e = Z.element, t = Z.bubble, n = this._vars, r = e.is(":visible");r || e.show();var i = t.is(":visible");i || t.show();var s = this.thumbnails.innerHeight() - (parseInt(this.thumbnails.css("padding-top")) || 0) - (parseInt(this.thumbnails.css("padding-bottom")) || 0);n.thumbnail.height = s;var o = this.slide.find(".fr-thumbnail:first"), u = !!o[0], a = 0;u || this._thumbs.append(o = $("<div>").addClass("fr-thumbnail").append($("<div>").addClass("fr-thumbnail-wrapper"))), a = parseInt(o.css("margin-left")), u || o.remove(), n.thumbnail.outerWidth = s + a * 2, n.thumbnails.height = this.thumbnails.innerHeight(), n.sides = {previous: this._previous.outerWidth(true), next: this._next.outerWidth(true)};var f = Bounds.viewport().width, l = n.thumbnail.outerWidth, c = this._thumbnails.length;n.sides.enabled = c * l / f > 1;var h = f, p = n.sides.previous + n.sides.next;n.sides.enabled && (h -= p), h = Math.floor(h / l) * l;var d = c * l;d < h && (h = d);var v = h + (n.sides.enabled ? p : 0);n.ipp = h / l, this._mode = "page", n.ipp <= 1 && (h = f, v = f, n.sides.enabled = false, this._mode = "center"), n.pages = Math.ceil(c * l / h), n.thumbnails.width = h, n.wrapper = {width: v}, i || t.hide(), r || e.hide();}, disable: function () {this._disabled = true;}, enable: function () {this._disabled = false;}, enabled: function () {return !this._disabled;}, show: function () {if (this._thumbnails.length < 2) {return;}this.enable(), this.thumbnails.show(), this._visible = true;}, hide: function () {this.disable(), this.thumbnails.hide(), this._visible = false;}, visible: function () {return !!this._visible;}, resize: function () {this.updateVars();var e = this._vars;$.each(this._thumbnails, function (e, t) {t.resize();}), this._previous[e.sides.enabled ? "show" : "hide"](), this._next[e.sides.enabled ? "show" : "hide"]();var t = e.thumbnails.width;Browser.IE && Browser.IE < 9 && (Z.timeouts.clear("ie-resizing-thumbnails"), Z.timeouts.set("ie-resizing-thumbnails", $.proxy(function () {this.updateVars();var t = e.thumbnails.width;this._thumbs.css({width: t + "px"}), this.slide.css({width: this._thumbnails.length * e.thumbnail.outerWidth + 1 + "px"});}, this), 500)), this._thumbs.css({width: t + "px"}), this.slide.css({width: this._thumbnails.length * e.thumbnail.outerWidth + 1 + "px"});var n = e.wrapper.width + 1;this.wrapper.css({width: n + "px", 'margin-left': -0.5 * n + "px"}), this._previous.add(this._next).css({height: e.thumbnail.height + "px"}), this._position && this.moveTo(this._position, true);if (Browser.IE && Browser.IE < 9) {var r = Z.element, i = Z.bubble, s = r.is(":visible");s || r.show();var o = i.is(":visible");o || i.show(), this._thumbs.height("100%"), this._thumbs.css({height: this._thumbs.innerHeight() + "px"}), this.thumbnails.find(".fr-thumbnail-overlay-border").hide(), o || i.hide(), s || r.hide();}}, moveToPage: function (e) {if (e < 1 || e > this._vars.pages || e == this._page) {return;}var t = this._vars.ipp * (e - 1) + 1;this.moveTo(t);}, previousPage: function () {this.moveToPage(this._page - 1);}, nextPage: function () {this.moveToPage(this._page + 1);}, adjustToViewport: function () {var e = Bounds.viewport();return e;}, setPosition: function (e) {if (Browser.IE && Browser.IE < 7) {return;}var t = this._position < 0;e < 1 && (e = 1);var n = this._thumbnails.length;e > n && (e = n), this._position = e, this.setActive(e);if (this._mode == "page" && this._page == Math.ceil(e / this._vars.ipp)) {return;}this.moveTo(e, t);}, moveTo: function (e, t) {this.updateVars();var n, r = Bounds.viewport().width, i = r * 0.5, s = this._vars.thumbnail.outerWidth;if (this._mode == "page") {var o = Math.ceil(e / this._vars.ipp);this._page = o, n = -1 * s * (this._page - 1) * this._vars.ipp;var u = "fr-thumbnails-side-button-disabled";this._previous_button[(o < 2 ? "add" : "remove") + "Class"](u), this._next_button[(o >= this._vars.pages ? "add" : "remove") + "Class"](u);} else {n = i + -1 * (s * (e - 1) + s * 0.5);}var a = Frames._frames && Frames._frames[Frames._position - 1];this.slide.stop(1, 0).animate({left: n + "px"}, t ? 0 : a ? a.view.options.effects.thumbnails.slide : 0, $.proxy(function () {this.loadCurrentPage();}, this));}, loadCurrentPage: function () {var e, t;if (!this._position || !this._vars.thumbnail.outerWidth || this._thumbnails.length < 1) {return;}if (this._mode == "page") {if (this._page < 1) {return;}e = (this._page - 1) * this._vars.ipp + 1, t = Math.min(e - 1 + this._vars.ipp, this._thumbnails.length);} else {var n = Math.ceil(Bounds.viewport().width / this._vars.thumbnail.outerWidth);e = Math.max(Math.floor(Math.max(this._position - n * 0.5, 0)), 1), t = Math.ceil(Math.min(this._position + n * 0.5)), this._thumbnails.length < t && (t = this._thumbnails.length);}for (var r = e; r <= t; r++) {this._thumbnails[r - 1].load();}}, setActive: function (e) {$.each(this._thumbnails, function (e, t) {t.deactivate();});var t = e && this._thumbnails[e - 1];t && t.activate();}, refresh: function () {this._position && this.setPosition(this._position);}};$.extend(Thumbnail.prototype, {initialize: function (e, t, n) {this.element = e, this.view = t, this._dimension = {}, this._position = n, this.build();}, build: function () {var e = this.view.options;this.element.append(this.thumbnail = $("<div>").addClass("fr-thumbnail").append(this.thumbnail_wrapper = $("<div>").addClass("fr-thumbnail-wrapper"))), this.view.type == "image" && this.thumbnail.addClass("fr-load-thumbnail").data("thumbnail", {view: this.view, src: e.thumbnail || this.view.url});var t = e.thumbnail && e.thumbnail.icon;t && this.thumbnail.append($("<div>").addClass("fr-thumbnail-icon fr-thumbnail-icon-" + t));var n;this.thumbnail.append(n = $("<div>").addClass("fr-thumbnail-overlay").append($("<div>").addClass("fr-thumbnail-overlay-background")).append(this.loading = $("<div>").addClass("fr-thumbnail-loading").append($("<div>").addClass("fr-thumbnail-loading-background")).append($("<div>").addClass("fr-thumbnail-loading-icon"))).append($("<div>").addClass("fr-thumbnail-overlay-border"))), this.thumbnail.append($("<div>").addClass("fr-thumbnail-state"));}, remove: function () {this.thumbnail.remove(), this.thumbnail = null, this.thumbnail_image = null;}, load: function () {if (this._loaded || this._loading || !bb.visible()) {return;}this._loading = true;var e = this.view.options.thumbnail, t = e && $.type(e) == "boolean" ? this.view.url : e || this.view.url;this._url = t, t && (this.view.type == "vimeo" ? $.getJSON("http://vimeo.com/api/v2/video/" + this.view._data.id + ".json?callback=?", $.proxy(function (e) {e && e[0] && e[0].thumbnail_medium ? (this._url = e[0].thumbnail_medium, ba.preload(this._url, {type: "image"}, $.proxy(this._afterLoad, this))) : (this._loaded = true, this._loading = false, this.loading.stop(1, 0).delay(this.view.options.effects.thumbnails.delay).fadeTo(this.view.options.effects.thumbnails.load, 0));}, this)) : ba.preload(this._url, {type: "image"}, $.proxy(this._afterLoad, this)));}, _afterLoad: function (e, t) {if (!this.thumbnail) {return;}this._loaded = true, this._loading = false, this._dimensions = e, this.image = $("<img>").attr({src: this._url}), this.thumbnail_wrapper.prepend(this.image), this.resize(), this.loading.stop(1, 0).delay(this.view.options.effects.thumbnails.delay).fadeTo(this.view.options.effects.thumbnails.load, 0);}, resize: function () {var e = bb._vars.thumbnail.height;this.thumbnail.css({width: e + "px", height: e + "px"});if (!this.image) {return;}var t = {width: e, height: e}, n = Math.max(t.width, t.height), r, i = $.extend({}, this._dimensions);if (i.width > t.width && i.height > t.height) {r = Fit.within(i, {bounds: t});var s = 1, o = 1;r.width < t.width && (s = t.width / r.width), r.height < t.height && (o = t.height / r.height);var u = Math.max(s, o);u > 1 && (r.width *= u, r.height *= u), $.each("width height".split(" "), function (e, t) {r[t] = Math.round(r[t]);});} else {r = Fit.within(i.width < t.width || i.height < t.height ? {width: n, height: n} : t, {bounds: this._dimensions});}var a = Math.round(t.width * 0.5 - r.width * 0.5), f = Math.round(t.height * 0.5 - r.height * 0.5);this.image.css(px(r)).css(px({top: f, left: a}));}, activate: function () {this.thumbnail.addClass("fr-thumbnail-active");}, deactivate: function () {this.thumbnail.removeClass("fr-thumbnail-active");}});var bc = {show: function (b) {var c = arguments[1] || {}, position = arguments[2];arguments[1] && $.type(arguments[1]) == "number" && (position = arguments[1], c = Y.create({}));var d = [], object_type;switch (object_type = $.type(b)) {case "string":case "object":var f = new View(b, c), _dgo = "data-fresco-group-options";if (f.group) {if (_.isElement(b)) {var g = $(".fresco[data-fresco-group=\"" + $(b).data("fresco-group") + "\"]"), h = {};g.filter("[" + _dgo + "]").each(function (i, a) {$.extend(h, eval("({" + ($(a).attr(_dgo) || "") + "})"));}), g.each(function (e, t) {!position && t == b && (position = e + 1), d.push(new View(t, $.extend({}, h, c)));});}} else {var h = {};_.isElement(b) && $(b).is("[" + _dgo + "]") && ($.extend(h, eval("({" + ($(b).attr(_dgo) || "") + "})")), f = new View(b, $.extend({}, h, c))), d.push(f);}break;case "array":$.each(b, function (e, t) {var n = new View(t, c);d.push(n);});default:;}if (!position || position < 1) {position = 1;}position > d.length && (position = d.length), Frames._xyp || Frames.setXY({x: 0, y: 0}), Z.load(d, position, {callback: function () {Z.show(function () {});}});}};$.extend(Fresco, {initialize: function () {Q.check("jQuery"), Z.initialize();}});var bd = {image: {extensions: "bmp gif jpeg jpg png", detect: function (e) {return $.inArray(detectExtension(e), this.extensions.split(" ")) > -1;}, data: function (e) {return this.detect() ? {extension: detectExtension(e)} : false;}}};Browser.Android && Browser.Android < 3 && $.each(Z, function (e, t) {$.type(t) == "function" && (Z[e] = function () {return this;});}), window.Fresco = Fresco, $(document).ready(function () {Fresco.initialize();});}(jQuery));